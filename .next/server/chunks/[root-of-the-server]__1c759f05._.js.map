{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/camilamota/Developer/app-astroglix/src/lib/stripe.ts"],"sourcesContent":["// Configura√ß√£o da Kirvano\nexport const KIRVANO_CONFIG = {\n  checkoutUrl: 'https://pay.kirvano.com/d7908b12-5e92-44b7-bffc-9e3433b7ff9d',\n  currency: 'BRL',\n  country: 'BR',\n  productName: 'Relat√≥rio M√≠stico Completo',\n  productDescription: 'Numerologia, Astrologia, Zod√≠aco Chin√™s e Astrocartografia',\n  price: 29.90\n}\n\n// Fun√ß√£o para criar URL de pagamento personalizada com dados do cliente\nexport const createKirvanoPaymentUrl = (customerData: { name: string; email: string; cpf?: string }, baseUrl?: string) => {\n  const checkoutUrl = baseUrl || KIRVANO_CONFIG.checkoutUrl\n  const params = new URLSearchParams({\n    customer_name: customerData.name,\n    customer_email: customerData.email,\n    ...(customerData.cpf && { customer_cpf: customerData.cpf })\n  })\n  \n  return `${checkoutUrl}?${params.toString()}`\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AACnB,MAAM,iBAAiB;IAC5B,aAAa;IACb,UAAU;IACV,SAAS;IACT,aAAa;IACb,oBAAoB;IACpB,OAAO;AACT;AAGO,MAAM,0BAA0B,CAAC,cAA6D;IACnG,MAAM,cAAc,WAAW,eAAe,WAAW;IACzD,MAAM,SAAS,IAAI,gBAAgB;QACjC,eAAe,aAAa,IAAI;QAChC,gBAAgB,aAAa,KAAK;QAClC,GAAI,aAAa,GAAG,IAAI;YAAE,cAAc,aAAa,GAAG;QAAC,CAAC;IAC5D;IAEA,OAAO,GAAG,YAAY,CAAC,EAAE,OAAO,QAAQ,IAAI;AAC9C","debugId":null}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/camilamota/Developer/app-astroglix/src/app/api/create-kirvano-payment/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { createKirvanoPaymentUrl, KIRVANO_CONFIG } from '@/lib/stripe'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { planType, amount, currency, customerData } = await request.json()\n\n    console.log('üî• Criando pagamento Kirvano:', { planType, amount, currency })\n\n    // Valida√ß√£o dos dados obrigat√≥rios\n    if (!customerData.name || !customerData.email) {\n      return NextResponse.json({\n        success: false,\n        error: 'Nome e email s√£o obrigat√≥rios para o pagamento.'\n      }, { status: 400 })\n    }\n\n    // Valida√ß√£o do valor\n    if (amount !== KIRVANO_CONFIG.price) {\n      return NextResponse.json({\n        success: false,\n        error: 'Valor do produto n√£o corresponde ao esperado.'\n      }, { status: 400 })\n    }\n\n    // URLs de callback para sucesso e cancelamento\n    const successUrl = `${request.nextUrl.origin}/success?status=success&payment_id=kirvano_${Date.now()}`\n    const cancelUrl = `${request.nextUrl.origin}/success?status=canceled&canceled=true`\n\n    // Cria a URL de pagamento personalizada\n    const paymentUrl = createKirvanoPaymentUrl({\n      name: customerData.name,\n      email: customerData.email,\n      cpf: customerData.cpf // Opcional\n    })\n\n    console.log('‚úÖ URL Kirvano criada:', paymentUrl)\n\n    return NextResponse.json({\n      success: true,\n      paymentUrl,\n      paymentMethod: 'kirvano',\n      data: {\n        url: paymentUrl,\n        customerData: {\n          name: customerData.name,\n          email: customerData.email\n        },\n        product: {\n          name: KIRVANO_CONFIG.productName,\n          description: KIRVANO_CONFIG.productDescription,\n          price: KIRVANO_CONFIG.price,\n          currency: KIRVANO_CONFIG.currency\n        }\n      }\n    })\n\n  } catch (error) {\n    console.error('üí• Erro ao criar pagamento Kirvano:', error)\n    \n    let errorMessage = 'Erro interno do servidor'\n    \n    if (error instanceof Error) {\n      errorMessage = error.message\n    }\n\n    return NextResponse.json({\n      success: false,\n      error: errorMessage\n    }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEvE,QAAQ,GAAG,CAAC,iCAAiC;YAAE;YAAU;YAAQ;QAAS;QAE1E,mCAAmC;QACnC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,aAAa,KAAK,EAAE;YAC7C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,qBAAqB;QACrB,IAAI,WAAW,sHAAA,CAAA,iBAAc,CAAC,KAAK,EAAE;YACnC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,+CAA+C;QAC/C,MAAM,aAAa,GAAG,QAAQ,OAAO,CAAC,MAAM,CAAC,2CAA2C,EAAE,KAAK,GAAG,IAAI;QACtG,MAAM,YAAY,GAAG,QAAQ,OAAO,CAAC,MAAM,CAAC,sCAAsC,CAAC;QAEnF,wCAAwC;QACxC,MAAM,aAAa,CAAA,GAAA,sHAAA,CAAA,0BAAuB,AAAD,EAAE;YACzC,MAAM,aAAa,IAAI;YACvB,OAAO,aAAa,KAAK;YACzB,KAAK,aAAa,GAAG,CAAC,WAAW;QACnC;QAEA,QAAQ,GAAG,CAAC,yBAAyB;QAErC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;YACA,eAAe;YACf,MAAM;gBACJ,KAAK;gBACL,cAAc;oBACZ,MAAM,aAAa,IAAI;oBACvB,OAAO,aAAa,KAAK;gBAC3B;gBACA,SAAS;oBACP,MAAM,sHAAA,CAAA,iBAAc,CAAC,WAAW;oBAChC,aAAa,sHAAA,CAAA,iBAAc,CAAC,kBAAkB;oBAC9C,OAAO,sHAAA,CAAA,iBAAc,CAAC,KAAK;oBAC3B,UAAU,sHAAA,CAAA,iBAAc,CAAC,QAAQ;gBACnC;YACF;QACF;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uCAAuC;QAErD,IAAI,eAAe;QAEnB,IAAI,iBAAiB,OAAO;YAC1B,eAAe,MAAM,OAAO;QAC9B;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;QACT,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF","debugId":null}}]
}